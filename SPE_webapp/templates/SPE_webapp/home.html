 {% extends 'SPE_webapp/base.html' %}
 {% block content %}
<!DOCTYPE html>
<html>

<head>
  
<title>W3.CSS Template</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" href="https://www.w3schools.com/lib/w3-theme-blue-grey.css">
<link rel='stylesheet' href="https://fonts.googleapis.com/css?family=Open+Sans">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

<style>

html, body, h1, h2, h3, h4, h5{font-family: "Open Sans", sans-serif}
</style>
</head>
<body class="w3-theme-l5">
  {% include 'SPE_webapp/navbar.html' %}
  <br>
  <br>
  <br>
 

  <center>
    {% for post in post %}
  <div class="card" style="width: 25rem;">
    
    <img src={{post.image.url}}  style="width: 25rem ">

      <div>
        <form id="like-count" method="post" action="{% url 'like_post' post.id %}">
            {% csrf_token %}
            <div class="container text-center" style="display:inline-flex; height:5rem;padding-top:1rem">
              
                <div  style="margin-right:10rem; display:flex ; float:left">
                  <button type="submit" class="btn btn-primary position-relative" >Likes
                    <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">
                      99+
                      <span class="visually-hidden">unread messages</span>
                    </span>
                  </button>
                </div>
                <div  style="display:flex; float:right">
                  <button type="submit" class="btn btn-primary position-relative" style="float: right"></i><a href="{% url 'view_comments' post.id %}">Comments</a></button>   
                  </button>
                <span id="like-count">{{ like_count }}</span>
                </div>
             
            </div>
                
              
            
        </form>
      </div>

  </div>
  
{% endfor %}
</center>



<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"> </script>
<script>

document.querySelector("#like-form").addEventListener("ajax:success", function(event) {
  var data = event.detail[0];
  document.querySelector("#like-count").textContent = data.like_count;
});


// Accordion
function myFunction(id) {
  var x = document.getElementById(id);
  if (x.className.indexOf("w3-show") == -1) {
    x.className += " w3-show";
    x.previousElementSibling.className += " w3-theme-d1";
  } else { 
    x.className = x.className.replace("w3-show", "");
    x.previousElementSibling.className = 
    x.previousElementSibling.className.replace(" w3-theme-d1", "");
  }
}

// Used to toggle the menu on smaller screens when clicking on the menu button
function openNav() {
  var x = document.getElementById("navDemo");
  if (x.className.indexOf("w3-show") == -1) {
    x.className += " w3-show";
  } else { 
    x.className = x.className.replace(" w3-show", "");
  }
}
</script>
</body>

</html> 
 {% endblock %} 
